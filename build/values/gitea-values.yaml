gitea:
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
  config:
    server:
      SSH_PORT: 22
      SSH_LISTEN_PORT: 2222
      DOMAIN: gitea.${domain}
      SSH_DOMAIN: ssh.${domain}
      ROOT_URL: https://gitea.${domain}
    database:
      DB_TYPE: postgres
      HOST: postgresql-primary.postgres
      NAME: gitea
      USER: gitea
      PASSWD: ${db_password}
    indexer:
      REPO_INDEXER_ENABLED: true
    mailer:
      ENABLED: true
      FROM: gitea@${domain}
      SMTP_ADDR: ${smtp_host}
      SMTP_PORT: ${smtp_port}
      USER: ${smtp_user}
      PASSWD: ${smtp_password}
    cache:
      ADAPTER: redis-cluster
      HOST: ${redis_connection}
    session:
      PROVIDER: redis-cluster
      PROVIDER_CONFIG: ${redis_connection}
    queue:
      TYPE: redis
      CONN_STR: ${redis_connection}
    service:
      DISABLE_REGISTRATION: true
    repository:
      DEFAULT_BRANCH: main
    metrics:
      ENABLED_ISSUE_BY_REPOSITORY: true
      ENABLED_ISSUE_BY_LABEL: true
    webhook:
      ALLOWED_HOST_LIST: "*"

redis-cluster:
  enabled: false

postgresql-ha:
  enabled: false

persistence:
  create: false
  claimName: ${pvc_name}

tolerations:
  - key: node-role.kubernetes.io/storage
    effect: NoSchedule

nodeSelector:
  node-role.kubernetes.io/storage: "true"

strategy:
  type: Recreate
